{% extends "base.html" %}
{% block script %}
<script>
  $(function() {
    $('.button').button();
    $('table.tablesorter').tablesorter({headers: {5: {sorter: false}}});
  });
</script>
{% endblock %}

{% block content %}
    <h1>Welcome to Solar Permitting for {{ main.jurisdiction|e }}</h1>
    
    <p>

<div id="start-new-case">
  <a href="/case/create" id="start-new-case-button" class="button">
    Start a new Case
  </a>
</div>

<div id="cases-in-progress" class="list-panel">
  You have {{ cases|length }} cases.  
  
  {% if cases %}
  <table class="tablesorter" id="cases"> 
    <thead>
      <tr>
	<th>
	  Case Name
	</th>
	<th>
	  Creation Date
	</th>
	<th>
	  Status
	</th>
	<th>
	  Latest Action
	</th>
	<th>
	  Latest Action Date
	</th>
	<th>
	  Edit
	</th>
      </tr>
    </thead>
    <tbody>
      {% for case in cases %}
      <tr>
	<td>
	  {{ case.address|e }}
	</td>
	<td>
	  {{ case.creation_date|e }}
	</td>
	<td>
	  {{ case.visible_state|e }}
	</td>
	<td>
	  {{ case.latest_action.action|e }}
	</td>
	<td>
	  {{ case.latest_action.timestamp|e }}
	</td>
	<td>
	  <a href="#TODO" class="button">Edit</a>
	</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endif %}
</div>
{% endblock %}
