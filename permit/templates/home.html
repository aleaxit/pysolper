{% extends "base.html" %}
{% block script %}
<script>
var emailPattern = /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
$(function() {
  $('.button').button()
  $('#login-form').submit(function() {
    var input = $('#login-email').val();
    if (emailPattern.test(input)) {
      return true;
    } else {
      $('#email-input-error').show();
      return false;
    }
  });
});
</script>
{% endblock %}

{% block content %}
    <h1>Welcome to Solar Permitting for {{ main.jurisdiction|e }}</h1>

    {% if user %}
    {% if not user.role %}
    <div class="login-box" id="login-choose-role">
      <p>
	You are logged in as <strong>{{ user.email|e }}</strong> 
	but your registration will be complete once you choose a role.
      </p>
      <form>
      <select name="role">
	{% for role in roles %}
	<option value="{{ role }}">{{ role }}</option>
	{% endfor %}
      </select>
      <br/>
      <input type="submit" class="button" value="Continue" />
      </form>
    </div>
    {% endif %}
    {% else %}
    <div class="login-box">
      Sign in with your
      <br/>
      <strong>Email Address:</strong>
      <form id="login-form" action="">
	<span id="email-input-error" class="error">
	  Invalid email address, please fix. 
	</span>
	<input name="email" id="login-email" type="text" size="30" />
	<input type="submit" class="button" value="Continue" />
      </form>
    </div>
    {% endif %}
    
<div>
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 
content content 

</div>

{% endblock %}
